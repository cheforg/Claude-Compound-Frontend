---
name: work-init
description: Initialize Claude agent environment for a project (run once per repo)
---

# Project Initialization

You are initializing the Claude agent environment for long-running autonomous work on this project.

## What You Will Create

1. `.claude/progress.txt` - Append-only session log for continuity across context windows
2. `.claude/init.sh` - Script to quickly start the development environment
3. `.claude/tasks/` - Directory for task-level feature tracking files
4. Initial git commit documenting the setup

## Step-by-Step Instructions

### Step 1: Analyze the Project

First, understand the project structure:

1. Run `pwd` to confirm location
2. Run `ls -la` to see project structure
3. Look for existing dev scripts: `cat package.json` or `cat Makefile` or similar
4. Identify how to start the dev server
5. Identify how to run tests

### Step 2: Create Directory Structure

```bash
mkdir -p .claude/tasks
```

### Step 3: Create progress.txt

Create `.claude/progress.txt` with this initial content:

```
# Claude Agent Progress Log
#
# This file tracks work across multiple agent sessions.
# Each session appends to this file - NEVER DELETE ENTRIES.
#
# Format for each session:
# ---
# Date: [ISO timestamp]
# Task: [task-id or "general"]
# Feature: [feature-id if applicable]
# Status: [completed/in-progress/blocked]
# Changes:
# - [bullet points of what was done]
# Git commits: [commit hashes]
# Next steps: [what the next session should do]
# Issues: [any bugs or blockers discovered]
# ---

## Project Initialized
Date: [CURRENT_TIMESTAMP]
Task: project-init
Status: completed
Changes:
- Created .claude/ directory structure
- Created progress.txt (this file)
- Created init.sh for dev environment startup
- Created tasks/ directory for feature tracking
Git commits: [WILL_BE_FILLED]
Next steps: Run /plan to create first task
Issues: None
---
```

### Step 4: Create init.sh

Create `.claude/init.sh` based on your analysis of the project:

```bash
#!/bin/bash
# Auto-generated by /work-init
# Purpose: Quickly start the development environment for agent sessions

set -e

echo "ðŸš€ Starting development environment..."

# -- CUSTOMIZE THIS SECTION BASED ON PROJECT ANALYSIS --

# Example for Node.js projects:
# npm install
# npm run dev &

# Example for Python projects:
# source venv/bin/activate
# pip install -r requirements.txt
# python manage.py runserver &

# Example for Docker projects:
# docker-compose up -d

# -- END CUSTOMIZATION --

# Wait for server to be ready
sleep 3

echo "âœ… Development environment ready"
echo ""
echo "Quick verification commands:"
echo "  - curl http://localhost:3000/health"
echo "  - npm test"
```

Make it executable:
```bash
chmod +x .claude/init.sh
```

### Step 5: Create .gitignore Entry (if needed)

Ensure `.claude/` is NOT gitignored - we want this tracked:
```bash
# Check if .claude is being ignored
git check-ignore .claude/progress.txt

# If it is ignored, add exception to .gitignore
echo "!.claude/" >> .gitignore
```

### Step 6: Commit the Setup

```bash
git add .claude/
git commit -m "chore: initialize claude agent environment

- Add .claude/progress.txt for session continuity
- Add .claude/init.sh for dev environment startup
- Add .claude/tasks/ for feature tracking

This enables long-running agent workflows with proper
state management across context windows."
```

### Step 7: Verify Setup

Run a quick verification:
```bash
./.claude/init.sh
```

Confirm the dev server starts correctly.

## Output

After running this command, the project will have:

```
project/
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ progress.txt    # Session log (has initial entry)
â”‚   â”œâ”€â”€ init.sh         # Dev startup script (executable)
â”‚   â””â”€â”€ tasks/          # Empty, ready for task files
â””â”€â”€ ... (existing project files)
```

## Important Notes

- This command should only be run ONCE per repository
- If `.claude/` already exists, ask the user if they want to reset it
- The init.sh should be customized based on the actual project setup
- Always commit the changes before ending the session
